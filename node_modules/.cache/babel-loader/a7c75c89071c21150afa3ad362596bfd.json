{"ast":null,"code":"import _objectSpread from\"/home/coeus/Desktop/React/movie-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/coeus/Desktop/React/movie-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/coeus/Desktop/React/movie-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/coeus/Desktop/React/movie-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/coeus/Desktop/React/movie-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/coeus/Desktop/React/movie-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/coeus/Desktop/React/movie-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{getMovies}from\"../services/fakeMovieService\";import{getGenres}from'../services/fakeGenreService';import Pagination from\"../common/Pagination\";import{Paginate}from'../helpers/Paginate';import ListGroup from'../common/ListGroup';import MoviesTable from'../common/MoviesTable';import _ from'lodash';var Movies=/*#__PURE__*/function(_Component){_inherits(Movies,_Component);function Movies(){var _getPrototypeOf2;var _this;_classCallCheck(this,Movies);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Movies)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={movies:[],genres:[],pageSize:4,sortColumn:{path:'title',order:'asc'},selectedGenre:'',currentPage:1};_this.handleDelete=function(id){var movies=_this.state.movies.filter(function(movie){return movie._id!==id;});_this.setState({movies:movies});};_this.handleLikeMovie=function(movie){var movies=_toConsumableArray(_this.state.movies);var new_movie=_objectSpread({},movie);var index=movies.indexOf(movie);movies[index]=new_movie;movies[index].like=!movies[index].like;_this.setState({movies:movies});};_this.handlePageChange=function(page){_this.setState({currentPage:page});};_this.handleGenreChange=function(genre){_this.setState({selectedGenre:genre,currentPage:1});};_this.handleSort=function(sortColumn){_this.setState({sortColumn:sortColumn});};return _this;}_createClass(Movies,[{key:\"componentDidMount\",value:function componentDidMount(){var genres=[{_id:'',name:'All Genre'}].concat(_toConsumableArray(getGenres()));this.setState({movies:getMovies(),genres:genres});}},{key:\"pageData\",value:function pageData(){var _this$state=this.state,pageSize=_this$state.pageSize,currentPage=_this$state.currentPage,allMovies=_this$state.movies,selectedGenre=_this$state.selectedGenre,sortColumn=_this$state.sortColumn;//if any genre selected then filter the movie according to that genre\nvar filteredMovies=selectedGenre&&selectedGenre._id?allMovies.filter(function(m){return m.genre._id===selectedGenre._id;}):allMovies;//after filter sort the movies\nvar sortedMovies=_.orderBy(filteredMovies,[sortColumn.path],[sortColumn.order]);var movies=Paginate(sortedMovies,currentPage,pageSize);return{data:movies,totalCount:allMovies.length};}},{key:\"render\",value:function render(){//some object destructuring\nvar count=this.state.movies.length;var _this$state2=this.state,pageSize=_this$state2.pageSize,currentPage=_this$state2.currentPage,sortColumn=_this$state2.sortColumn;var _this$pageData=this.pageData(),totalCount=_this$pageData.totalCount,movies=_this$pageData.data;if(count===0)return React.createElement(\"p\",{style:{fontWeight:'bold',textAlign:'center'}},\"No movie found\");return React.createElement(\"main\",{role:\"main\",className:\"container\",style:{padding:23}},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-2\"},React.createElement(ListGroup,{genres:this.state.genres,selectedGenre:this.state.selectedGenre,onGenreChange:this.handleGenreChange})),React.createElement(\"div\",{className:\"col\"},React.createElement(\"p\",{style:{fontWeight:'bold',textAlign:'center'}},totalCount,\" movies found \"),React.createElement(MoviesTable,{movies:movies,sortColumn:sortColumn,onLike:this.handleLikeMovie,onDelete:this.handleDelete,onSort:this.handleSort}),React.createElement(Pagination,{itemsCount:totalCount,pageSize:pageSize,currentPage:currentPage,onPageChange:this.handlePageChange}))));}}]);return Movies;}(Component);export default Movies;","map":{"version":3,"sources":["/home/coeus/Desktop/React/movie-list/src/components/MovieList.jsx"],"names":["React","Component","getMovies","getGenres","Pagination","Paginate","ListGroup","MoviesTable","_","Movies","state","movies","genres","pageSize","sortColumn","path","order","selectedGenre","currentPage","handleDelete","id","filter","movie","_id","setState","handleLikeMovie","new_movie","index","indexOf","like","handlePageChange","page","handleGenreChange","genre","handleSort","name","allMovies","filteredMovies","m","sortedMovies","orderBy","data","totalCount","length","count","pageData","fontWeight","textAlign","padding"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { getMovies } from \"../services/fakeMovieService\";\nimport { getGenres } from '../services/fakeGenreService';\nimport Pagination from \"../common/Pagination\"\nimport {Paginate} from '../helpers/Paginate'\nimport ListGroup from '../common/ListGroup'\nimport MoviesTable from '../common/MoviesTable'\nimport _ from 'lodash'\n\nclass Movies extends Component {\n    state = { \n        movies: [],\n        genres: [],\n        pageSize: 4,\n        sortColumn: {path: 'title', order: 'asc'},\n        selectedGenre: '',\n        currentPage: 1\n     }\n\n    componentDidMount(){\n        const genres = [ {_id: '', name: 'All Genre'}, ...getGenres()]\n        this.setState({\n            movies: getMovies(),\n            genres: genres,\n        });\n    } \n\n    handleDelete = (id) => {\n        let movies = this.state.movies.filter( movie => movie._id !== id)\n        this.setState({\n            movies: movies\n        });\n    }\n\n    handleLikeMovie = (movie) => {\n        let movies = [...this.state.movies];\n        let new_movie = {...movie};\n        const index = movies.indexOf(movie);\n        movies[index] = new_movie;\n        movies[index].like = !(movies[index].like);\n        this.setState({\n            movies: movies\n        })\n    }\n\n    handlePageChange = (page) => {\n        this.setState({\n            currentPage: page\n        })\n    }\n\n    handleGenreChange = (genre) => {\n        this.setState({\n            selectedGenre: genre,\n            currentPage: 1\n        })\n    }\n\n    handleSort = (sortColumn) => {\n        this.setState({\n            sortColumn\n        })\n    }\n\n    pageData() {\n        let {pageSize, currentPage, movies:allMovies, selectedGenre, sortColumn} = this.state\n\n        //if any genre selected then filter the movie according to that genre\n        let filteredMovies = selectedGenre && selectedGenre._id \n        ? allMovies.filter( m => m.genre._id === selectedGenre._id ) \n        : allMovies;\n        //after filter sort the movies\n        const sortedMovies = _.orderBy(filteredMovies, [sortColumn.path], [sortColumn.order])\n\n        const movies = Paginate(sortedMovies, currentPage, pageSize);\n\n        return {\n            data: movies,\n            totalCount: allMovies.length\n        }\n    }\n\n    render() { \n        //some object destructuring\n        let {length: count} = this.state.movies\n        let {pageSize, currentPage, sortColumn} = this.state\n        \n        let {totalCount, data: movies} = this.pageData();\n\n        if(count === 0)\n            return <p style={{fontWeight: 'bold', textAlign: 'center'}}>No movie found</p>    \n        return (     \n        <main role=\"main\" className=\"container\" style={{padding: 23}}>\n            <div className=\"row\">\n                <div className=\"col-2\">\n                    <ListGroup \n                        genres={ this.state.genres } \n                        selectedGenre={ this.state.selectedGenre } \n                        onGenreChange={ this.handleGenreChange }\n                    />\n                </div>\n\n                <div className=\"col\">\n                    <p style={{fontWeight: 'bold', textAlign: 'center'}}>{ totalCount } movies found </p>\n                        \n                        <MoviesTable \n                            movies={ movies } \n                            sortColumn={ sortColumn }\n                            onLike={ this.handleLikeMovie } \n                            onDelete={ this.handleDelete }\n                            onSort={ this.handleSort}\n                        />\n\n                        <Pagination \n                            itemsCount={ totalCount } \n                            pageSize={ pageSize } \n                            currentPage={ currentPage } \n                            onPageChange={ this.handlePageChange }\n                        />\n                </div>\n            </div>\n           \n        </main>\n      );\n    }\n}\n \nexport default Movies;"]},"metadata":{},"sourceType":"module"}