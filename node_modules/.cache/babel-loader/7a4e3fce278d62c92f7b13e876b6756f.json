{"ast":null,"code":"var _jsxFileName = \"/home/coeus/Desktop/React/movie-list/src/components/MovieList.jsx\";\nimport React, { Component } from 'react';\nimport { getMovies } from \"../services/fakeMovieService\";\nimport { getGenres } from '../services/fakeGenreService';\nimport Like from \"../common/Like\";\nimport Pagination from \"../common/Pagination\";\nimport { Paginate } from '../helpers/Paginate';\nimport ListGroup from '../common/ListGroup';\nimport MoviesTable from '../common/MoviesTable';\nimport _ from 'lodash';\n\nclass Movies extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      movies: [],\n      genres: [],\n      pageSize: 4,\n      sortColumn: {\n        path: 'title',\n        order: 'asc'\n      },\n      selectedGenre: '',\n      currentPage: 1\n    };\n\n    this.handleDelete = id => {\n      let movies = this.state.movies.filter(movie => movie._id != id);\n      this.setState({\n        movies: movies\n      });\n    };\n\n    this.handleLikeMovie = movie => {\n      let movies = [...this.state.movies];\n      let new_movie = { ...movie\n      };\n      const index = movies.indexOf(movie);\n      movies[index] = new_movie;\n      movies[index].like = !movies[index].like;\n      this.setState({\n        movies: movies\n      });\n    };\n\n    this.handlePageChange = page => {\n      this.setState({\n        currentPage: page\n      });\n    };\n\n    this.handleGenreChange = genre => {\n      this.setState({\n        selectedGenre: genre,\n        currentPage: 1\n      });\n    };\n\n    this.handleSort = path => {\n      //for handling reverse of the ordering first duplicate the object\n      //check what the previous path is\n      const sortColumn = { ...this.state.sortColumn\n      };\n\n      if (sortColumn.path === path) {\n        sortColumn.order = sortColumn.order == 'asc' ? 'desc' : 'asc';\n      } else {\n        sortColumn.path = path, sortColumn.sort = 'asc';\n      }\n\n      this.setState({\n        sortColumn: sortColumn\n      });\n    };\n  }\n\n  componentDidMount() {\n    const genres = [{\n      _id: '',\n      name: 'All Genre'\n    }, ...getGenres()];\n    this.setState({\n      movies: getMovies(),\n      genres: genres\n    });\n  }\n\n  render() {\n    //some object destructuring\n    let {\n      length: count\n    } = this.state.movies;\n    let {\n      pageSize,\n      currentPage,\n      movies: allMovies,\n      selectedGenre,\n      sortColumn\n    } = this.state; //if any genre selected then filter the movie according to that genre\n\n    let filteredMovies = selectedGenre && selectedGenre._id ? allMovies.filter(m => m.genre._id === selectedGenre._id) : allMovies; //after filter sort the movies\n\n    const sortedMovies = _.orderBy(filteredMovies, [sortColumn.path], [sortColumn.order]);\n\n    const movies = Paginate(sortedMovies, currentPage, pageSize);\n    if (count === 0) return React.createElement(\"p\", {\n      style: {\n        fontWeight: 'bold',\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"No movie found\");\n    return React.createElement(\"main\", {\n      role: \"main\",\n      className: \"container\",\n      style: {\n        padding: 23\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(ListGroup, {\n      genres: this.state.genres,\n      selectedGenre: this.state.selectedGenre,\n      onGenreChange: this.handleGenreChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: {\n        fontWeight: 'bold',\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, filteredMovies.length, \" movies found \"), React.createElement(MoviesTable, {\n      movies: movies,\n      onLike: this.handleLikeMovie,\n      onDelete: this.handleDelete,\n      onSort: this.handleSort,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), React.createElement(Pagination, {\n      itemsCount: filteredMovies.length,\n      pageSize: pageSize,\n      currentPage: currentPage,\n      onPageChange: this.handlePageChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default Movies;","map":{"version":3,"sources":["/home/coeus/Desktop/React/movie-list/src/components/MovieList.jsx"],"names":["React","Component","getMovies","getGenres","Like","Pagination","Paginate","ListGroup","MoviesTable","_","Movies","state","movies","genres","pageSize","sortColumn","path","order","selectedGenre","currentPage","handleDelete","id","filter","movie","_id","setState","handleLikeMovie","new_movie","index","indexOf","like","handlePageChange","page","handleGenreChange","genre","handleSort","sort","componentDidMount","name","render","length","count","allMovies","filteredMovies","m","sortedMovies","orderBy","fontWeight","textAlign","padding"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,SAAT,QAA0B,8BAA1B;AACA,SAASC,SAAT,QAA0B,8BAA1B;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,OAAOC,UAAP,MAAuB,sBAAvB;AACA,SAAQC,QAAR,QAAuB,qBAAvB;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AACA,OAAOC,WAAP,MAAwB,uBAAxB;AACA,OAAOC,CAAP,MAAc,QAAd;;AAEA,MAAMC,MAAN,SAAqBT,SAArB,CAA+B;AAAA;AAAA;AAAA,SAC3BU,KAD2B,GACnB;AACJC,MAAAA,MAAM,EAAE,EADJ;AAEJC,MAAAA,MAAM,EAAE,EAFJ;AAGJC,MAAAA,QAAQ,EAAE,CAHN;AAIJC,MAAAA,UAAU,EAAE;AAACC,QAAAA,IAAI,EAAE,OAAP;AAAgBC,QAAAA,KAAK,EAAE;AAAvB,OAJR;AAKJC,MAAAA,aAAa,EAAE,EALX;AAMJC,MAAAA,WAAW,EAAE;AANT,KADmB;;AAAA,SAkB3BC,YAlB2B,GAkBXC,EAAD,IAAQ;AACnB,UAAIT,MAAM,GAAG,KAAKD,KAAL,CAAWC,MAAX,CAAkBU,MAAlB,CAA0BC,KAAK,IAAIA,KAAK,CAACC,GAAN,IAAaH,EAAhD,CAAb;AACA,WAAKI,QAAL,CAAc;AACVb,QAAAA,MAAM,EAAEA;AADE,OAAd;AAGH,KAvB0B;;AAAA,SAyB3Bc,eAzB2B,GAyBRH,KAAD,IAAW;AACzB,UAAIX,MAAM,GAAG,CAAC,GAAG,KAAKD,KAAL,CAAWC,MAAf,CAAb;AACA,UAAIe,SAAS,GAAG,EAAC,GAAGJ;AAAJ,OAAhB;AACA,YAAMK,KAAK,GAAGhB,MAAM,CAACiB,OAAP,CAAeN,KAAf,CAAd;AACAX,MAAAA,MAAM,CAACgB,KAAD,CAAN,GAAgBD,SAAhB;AACAf,MAAAA,MAAM,CAACgB,KAAD,CAAN,CAAcE,IAAd,GAAqB,CAAElB,MAAM,CAACgB,KAAD,CAAN,CAAcE,IAArC;AACA,WAAKL,QAAL,CAAc;AACVb,QAAAA,MAAM,EAAEA;AADE,OAAd;AAGH,KAlC0B;;AAAA,SAoC3BmB,gBApC2B,GAoCPC,IAAD,IAAU;AACzB,WAAKP,QAAL,CAAc;AACVN,QAAAA,WAAW,EAAEa;AADH,OAAd;AAGH,KAxC0B;;AAAA,SA0C3BC,iBA1C2B,GA0CNC,KAAD,IAAW;AAC3B,WAAKT,QAAL,CAAc;AACVP,QAAAA,aAAa,EAAEgB,KADL;AAEVf,QAAAA,WAAW,EAAE;AAFH,OAAd;AAIH,KA/C0B;;AAAA,SAiD3BgB,UAjD2B,GAiDbnB,IAAD,IAAU;AACnB;AACA;AACA,YAAMD,UAAU,GAAG,EAAC,GAAG,KAAKJ,KAAL,CAAWI;AAAf,OAAnB;;AACA,UAAGA,UAAU,CAACC,IAAX,KAAoBA,IAAvB,EAA4B;AACxBD,QAAAA,UAAU,CAACE,KAAX,GAAoBF,UAAU,CAACE,KAAX,IAAoB,KAArB,GAA8B,MAA9B,GAAuC,KAA1D;AACH,OAFD,MAEK;AACDF,QAAAA,UAAU,CAACC,IAAX,GAAkBA,IAAlB,EACAD,UAAU,CAACqB,IAAX,GAAkB,KADlB;AAEH;;AACD,WAAKX,QAAL,CAAc;AACVV,QAAAA,UAAU,EAAEA;AADF,OAAd;AAGH,KA9D0B;AAAA;;AAU3BsB,EAAAA,iBAAiB,GAAE;AACf,UAAMxB,MAAM,GAAG,CAAE;AAACW,MAAAA,GAAG,EAAE,EAAN;AAAUc,MAAAA,IAAI,EAAE;AAAhB,KAAF,EAAgC,GAAGnC,SAAS,EAA5C,CAAf;AACA,SAAKsB,QAAL,CAAc;AACVb,MAAAA,MAAM,EAAEV,SAAS,EADP;AAEVW,MAAAA,MAAM,EAAEA;AAFE,KAAd;AAIH;;AAgDD0B,EAAAA,MAAM,GAAG;AACL;AACA,QAAI;AAACC,MAAAA,MAAM,EAAEC;AAAT,QAAkB,KAAK9B,KAAL,CAAWC,MAAjC;AACA,QAAI;AAACE,MAAAA,QAAD;AAAWK,MAAAA,WAAX;AAAwBP,MAAAA,MAAM,EAAC8B,SAA/B;AAA0CxB,MAAAA,aAA1C;AAAyDH,MAAAA;AAAzD,QAAuE,KAAKJ,KAAhF,CAHK,CAIL;;AACA,QAAIgC,cAAc,GAAGzB,aAAa,IAAIA,aAAa,CAACM,GAA/B,GACfkB,SAAS,CAACpB,MAAV,CAAkBsB,CAAC,IAAIA,CAAC,CAACV,KAAF,CAAQV,GAAR,KAAgBN,aAAa,CAACM,GAArD,CADe,GAEfkB,SAFN,CALK,CAQL;;AACA,UAAMG,YAAY,GAAGpC,CAAC,CAACqC,OAAF,CAAUH,cAAV,EAA0B,CAAC5B,UAAU,CAACC,IAAZ,CAA1B,EAA6C,CAACD,UAAU,CAACE,KAAZ,CAA7C,CAArB;;AAEA,UAAML,MAAM,GAAGN,QAAQ,CAACuC,YAAD,EAAe1B,WAAf,EAA4BL,QAA5B,CAAvB;AAEA,QAAG2B,KAAK,KAAK,CAAb,EACI,OAAO;AAAG,MAAA,KAAK,EAAE;AAACM,QAAAA,UAAU,EAAE,MAAb;AAAqBC,QAAAA,SAAS,EAAE;AAAhC,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAP;AACJ,WACA;AAAM,MAAA,IAAI,EAAC,MAAX;AAAkB,MAAA,SAAS,EAAC,WAA5B;AAAwC,MAAA,KAAK,EAAE;AAACC,QAAAA,OAAO,EAAE;AAAV,OAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,SAAD;AACI,MAAA,MAAM,EAAG,KAAKtC,KAAL,CAAWE,MADxB;AAEI,MAAA,aAAa,EAAG,KAAKF,KAAL,CAAWO,aAF/B;AAGI,MAAA,aAAa,EAAG,KAAKe,iBAHzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,EASI;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAG,MAAA,KAAK,EAAE;AAACc,QAAAA,UAAU,EAAE,MAAb;AAAqBC,QAAAA,SAAS,EAAE;AAAhC,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAuDL,cAAc,CAACH,MAAtE,mBADJ,EAGQ,oBAAC,WAAD;AACI,MAAA,MAAM,EAAG5B,MADb;AAEI,MAAA,MAAM,EAAG,KAAKc,eAFlB;AAGI,MAAA,QAAQ,EAAG,KAAKN,YAHpB;AAII,MAAA,MAAM,EAAG,KAAKe,UAJlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHR,EAUQ,oBAAC,UAAD;AACI,MAAA,UAAU,EAAGQ,cAAc,CAACH,MADhC;AAEI,MAAA,QAAQ,EAAG1B,QAFf;AAGI,MAAA,WAAW,EAAGK,WAHlB;AAII,MAAA,YAAY,EAAG,KAAKY,gBAJxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVR,CATJ,CADJ,CADA;AAgCH;;AA/G0B;;AAkH/B,eAAerB,MAAf","sourcesContent":["import React, { Component } from 'react';\nimport { getMovies } from \"../services/fakeMovieService\";\nimport { getGenres } from '../services/fakeGenreService';\nimport Like from \"../common/Like\"\nimport Pagination from \"../common/Pagination\"\nimport {Paginate} from '../helpers/Paginate'\nimport ListGroup from '../common/ListGroup'\nimport MoviesTable from '../common/MoviesTable'\nimport _ from 'lodash'\n\nclass Movies extends Component {\n    state = { \n        movies: [],\n        genres: [],\n        pageSize: 4,\n        sortColumn: {path: 'title', order: 'asc'},\n        selectedGenre: '',\n        currentPage: 1\n     }\n\n    componentDidMount(){\n        const genres = [ {_id: '', name: 'All Genre'}, ...getGenres()]\n        this.setState({\n            movies: getMovies(),\n            genres: genres,\n        });\n    } \n\n    handleDelete = (id) => {\n        let movies = this.state.movies.filter( movie => movie._id != id)\n        this.setState({\n            movies: movies\n        });\n    }\n\n    handleLikeMovie = (movie) => {\n        let movies = [...this.state.movies];\n        let new_movie = {...movie};\n        const index = movies.indexOf(movie);\n        movies[index] = new_movie;\n        movies[index].like = !(movies[index].like);\n        this.setState({\n            movies: movies\n        })\n    }\n\n    handlePageChange = (page) => {\n        this.setState({\n            currentPage: page\n        })\n    }\n\n    handleGenreChange = (genre) => {\n        this.setState({\n            selectedGenre: genre,\n            currentPage: 1\n        })\n    }\n\n    handleSort = (path) => {\n        //for handling reverse of the ordering first duplicate the object\n        //check what the previous path is\n        const sortColumn = {...this.state.sortColumn};\n        if(sortColumn.path === path){\n            sortColumn.order = (sortColumn.order == 'asc') ? 'desc' : 'asc';\n        }else{\n            sortColumn.path = path,\n            sortColumn.sort = 'asc'\n        }\n        this.setState({\n            sortColumn: sortColumn\n        })\n    }\n\n    render() { \n        //some object destructuring\n        let {length: count} = this.state.movies\n        let {pageSize, currentPage, movies:allMovies, selectedGenre, sortColumn} = this.state\n        //if any genre selected then filter the movie according to that genre\n        let filteredMovies = selectedGenre && selectedGenre._id \n            ? allMovies.filter( m => m.genre._id === selectedGenre._id ) \n            : allMovies;\n        //after filter sort the movies\n        const sortedMovies = _.orderBy(filteredMovies, [sortColumn.path], [sortColumn.order])\n\n        const movies = Paginate(sortedMovies, currentPage, pageSize);\n    \n        if(count === 0)\n            return <p style={{fontWeight: 'bold', textAlign: 'center'}}>No movie found</p>    \n        return (     \n        <main role=\"main\" className=\"container\" style={{padding: 23}}>\n            <div className=\"row\">\n                <div className=\"col-2\">\n                    <ListGroup \n                        genres={ this.state.genres } \n                        selectedGenre={ this.state.selectedGenre } \n                        onGenreChange={ this.handleGenreChange }\n                    />\n                </div>\n\n                <div className=\"col\">\n                    <p style={{fontWeight: 'bold', textAlign: 'center'}}>{ filteredMovies.length } movies found </p>\n                        \n                        <MoviesTable \n                            movies={ movies } \n                            onLike={ this.handleLikeMovie } \n                            onDelete={ this.handleDelete }\n                            onSort={ this.handleSort}\n                        />\n\n                        <Pagination \n                            itemsCount={ filteredMovies.length } \n                            pageSize={ pageSize } \n                            currentPage={ currentPage } \n                            onPageChange={ this.handlePageChange }\n                        />\n                </div>\n            </div>\n           \n        </main>\n      );\n    }\n}\n \nexport default Movies;"]},"metadata":{},"sourceType":"module"}